<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>活动管理</title>
  <link href="/common/css/main.css" rel="stylesheet" type="text/css">
  <link href="/common/usercenter/css/usercenter.css" rel="stylesheet" type="text/css">
</head>

<body>
  <style>
    .contant {
      padding-bottom: 20px;
    }

    .searchrow label {
      width: 32%;
    }

    .searchrow.normal label span.label {
      width: 20%;
    }

    .searchrow.normal label .ipt,
    .searchrow.normal label .select {
      width: 78%;
    }

    .itembody,
    .orderheader {
      width: 100%;
      display: table;
    }

    .form-view {
      padding: 20px;
    }

    .itembody {
      border-bottom: 1px solid #d2d2d2;
    }

    .itembody .operation,
    .orderheader .operation {
      width: 10%;
      vertical-align: middle;
      display: table-cell;
      float: none;
      padding: 10px 0;
    }

    .itembody .active-time,
    .orderheader .active-time {
      width: 20%;
      vertical-align: middle;
      display: table-cell;
      float: none;
      padding: 10px 0;
      text-align: center;
    }

    .itembody .goodslist,
    .orderheader .goods {
      width: 30%;
      display: table-cell;
      vertical-align: middle;
      float: none;
      padding: 10px 0;
    }

    .itembody .number,
    .orderheader .number {
      width: 11%;
      float: none;
      display: table-cell;
      padding: 10px 0;
    }

    .itembody .operation a {
      display: inline-block;
      color: #1890FF;
    }

    .line2 {
      width: 100%;
      display: -webkit-box;
      overflow: hidden;
      text-overflow: ellipsis;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .itembody .operation .ops-more-menu a {
      display: block;
    }

    .itembody .ops-more-menu {
      display: none;
      position: absolute;
      background: #fff;
      white-space: nowrap;
      z-index: 1;
      left: 50%;
      margin-left: -49px;
      width: 90px;
      border: 1px solid #eee;
    }

    .itembody .active.ops-more-menu {
      display: block;
    }

    .itembody .ops-more-container {
      position: relative;
      display: inline-block;
    }

    .itembody .title {
      max-height: 53px;
      display: -webkit-box;
      overflow: hidden;
      text-overflow: ellipsis;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .searchrow .icon-create-time {
      width: 18px;
      height: 18px;
      position: absolute;
      right: 5px;
      top: 5px;
      cursor: pointer;
      display: inline-block;
      background-repeat: no-repeat;
      background-size: contain;
      background-position: 0;
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTg3MTM5QTY2MTc5MTFFOEEwQjJGRkYyQTBDRTM0QjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkQwM0NGMDQ2MTdBMTFFOEEwQjJGRkYyQTBDRTM0QjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ODcxMzlBNDYxNzkxMUU4QTBCMkZGRjJBMENFMzRCOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1ODcxMzlBNTYxNzkxMUU4QTBCMkZGRjJBMENFMzRCOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoVzpMgAAAEPSURBVHjaYmxoaGCAATExyf8w9qtXzxkZsABcapiAEgwwDAKZmWkwDVgxLjVMQP5hIP4PxcjgPw6MTc1hkEE2DJQDGyYGKgHGadNm/qeGQVRzEQvMZRSa85/qLsIJgGlGCBqzDg8ePLTds2ffs9+/f/sTNMjf30dASkrKGci0h2IdUFg+ffqMYc+eve9///6TSVRgb968bfXdu/fWAJm5QKwHUvPkyROG7dt3vAUa4gLknyHKoH///qXt3r334e3bd8D8R48eAw3Z9RpqyDlSwuj+////7ffu3b//1avXilevXnv19+9fkFevkJOOHoIMu3Tp8mGgIQ6EDCEUa4+B2G5AUvYRLMUDqeAoQIABAMKseRwm2ZWgAAAAAElFTkSuQmCC);
    }
    .url-dialog{
      position: fixed;
      top: 50%;
      left: 0;
      width: 100%;
    }
    .url-dialog div{
      color:#fff;
      width:400px;
      margin:0 auto;
      background-color: rgba(0, 0, 0, .6);
    }
    .url-dialog .close-dialog{
      text-align: right;
      padding: 10px 20px 0 0;
      font-size: 20px;
      cursor: pointer;
    }
    .url-dialog .content{
      padding:20px;
      text-align: left;
    }
    .url-dialog .title{
      text-align: center;
      padding:0 20px 0 0;
      font-size:20px;
    }
  </style>
  <div class="box" id='index_box'>
    <ly-toper></ly-toper>
    <header-bar type="conference"></header-bar>
    <div class="contant">
      <div class="mdiv">
        <buyer-left :http='http'></buyer-left>
        <div class="crumbs">
          <a href="./index.html?code=001.004.001.003">活动中心</a>
          <span>我的活动</span>
        </div>
        <div class="centerbox">
          <div class="tabbox">
            <!--所有订单-->
            <div class="active">
              <!--搜索框-->
              <div class="searchform">
                <div class="searchrow normal">
                  <label><span  class="label">关键字</span>
                    <div class="ipt"><input type="search" v-model="queryForm.title" placeholder="请输入"></div>
                  </label>
                  <label style="margin: 0 2%;">
                    <span class="label">活动状态</span>
                    <div class="select">
                      <select v-model="queryForm.status" placeholder="请选择">
                        <option value="">请选择</option>
                        <option :value="opt.value" v-for="opt in options.active_status" :key="opt.id">{{opt.display}}
                        </option>
                      </select>
                    </div>
                  </label>
                  <label>
                    <span class="label">活动类型</span>
                    <div style="width: 78%;">
                      <select-type v-model="queryForm.activeType" :select-data="options.active_type"></select-type>
                    </div>
                  </label>
                  <label style="width: 60%;">
                    <span class="label">活动时间</span>
                    <div class="ipt" style="width: 40%;">
                      <input type="text" id="time" readonly placeholder="活动开始时间">
                      <label for="time" class="icon-create-time"></label>
                    </div>
                    <div class="ipt" style="width: 40%;margin-left: 4%;">
                      <input type="text" id="time1" readonly placeholder="活动结束时间">
                      <label for="time1" class="icon-create-time"></label>
                    </div>
                  </label>
                  <button type="button"
                    style="background-color: #1890FF;border-color: #1890FF;border-radius: 5px; float: right;"
                    @click="getOrderList">搜索</button>
                </div>
              </div>
              <!--/搜索框-->
              <!--订单列表-->
              <div class="orderbox">
                <div class="control">
                  <a class="addtec fs14" @click="isActiveLock('')"><i class="iconfont icon-jia"></i>新增 </a>
                </div>
                <div class="orderheader">
                  <div class="goods">活动名称</div>
                  <div class="number">活动类型</div>
                  <div class="number">活动状态</div>
                  <div class="active-time">活动时间</div>
                  <div class="number">所属行业</div>
                  <div class="operation">操作</div>
                </div>
                <div class="orderlist">
                  <!--订单项-->
                  <div class="itembody" v-for="order,i in orderList">
                    <div class="goodslist">
                      <!--商品项-->
                      <!-- <span class="img" :style="'background-image: url(' + ((sku.goodsImg && sku.goodsImg.url) || 'http://dummyimage.com/62x62') + ')'"></span> -->
                      <div class="title line2" :title="order.title" v-text="order.title"></div>
                    </div>
                    <div class="number" v-text="order.activeTypeDisplay"></div>
                    <div class="number" v-text="order.statusDisplay"></div>
                    <div class="active-time"
                      v-html="(order.activeStartTime || '') + ' <BR> ' + (order.activeEndTime|| '')"></div>
                    <div class="number">
                      <div class="line2" v-text="order.industryNames" :title="order.industryNames"></div>
                    </div>
                    <div class="operation">
                      <a target="_blank" :href="'add.html?code=001.004.001.001&type=view&id=' + order.id"
                        style="margin-right:10px;">查看</a>
                      <span class="ops-more-container">
                        <a @click.stop="showMore(i)">更多</a>
                        <div class="ops-more-menu" :class="{active:index===i}">
                          <a v-if="order.status !== '01' && order.status !== '02' && order.status !== '04'"
                            @click="handleGetWxCode(order.id)">活动二维码</a>
                          <a v-if="order.status !== '01' && order.status !== '02' && order.status !== '04'"
                            @click="handleGetWxSignCode(order.id)">签到二维码</a>
                          <a v-if="order.allowUpdateFlag" @click="isActiveLock(order.id)">编辑</a>
                          <a v-if="order.status !== '01' && order.status !== '02' && order.status !== '04'"
                            @click="handlePutawayOrSoldout(order.id,order.upperFlag === '1' ? 0 : 1,order.version)"
                            v-text="order.upperFlag === '1' ? '下架' : '上架'"></a>
                          <a v-if="order.status !== '02'" @click="handleDelete(order.id,order.version)">删除</a>
                          <a target="_blank" v-if="order.enrollFlag && order.status !== '01'"
                            :href="'participation.html?code=001.004.001.001&id=' + order.id">报名管理</a>
                          <a target="_blank" v-if="order.enrollFlag && order.status !== '01'"
                            :href="'importEnroll.html?code=001.004.001.001&id=' + order.id">导入报名名单</a>
                          <a :href="'report.html?code=001.004.001.001&id=' + order.id" v-if="false">活动回顾</a>
                          <a target="_blank" v-if="order.signFlag  && order.status !== '01'"
                            :href="'signature.html?code=001.004.001.001&id=' + order.id">查看签到</a>
                          <a target="_blank" v-if="order.receiptFlag  && order.status !== '01'"
                            :href="'receipt.html?code=001.004.001.001&id=' + order.id">查看反馈</a>
                          <a v-if="order.code === '0303'&&order.webinarId&&order.liveState!=='1'"
                              @click="handleStartLive(order.id)">开始直播</a>
                          <a v-if="order.code === '0303'&&order.webinarId&&order.liveState==='1'"
                             @click="handleEndLive(order.id)">结束直播</a>
                          <a v-if="order.code === '0303'&&order.webinarId&&order.liveState==='1'"
                             @click="handleStreamUrl(order.id)">获取推流地址</a>
                        </div>
                      </span>
                    </div>
                  </div>
                </div>
                <!--分页-->
                <div class="pager" v-cloak>
                  <a @click='pageClick(1)'>[首页]</a>
                  <a @click='pageClick(queryForm.pageNum - 1)'>[上一页]</a>
                  <a @click='pageClick(item)' v-for='item in pages' v-text='item'
                    :class="{active: item == queryForm.pageNum}" v-if='isShowPage(item)'></a>
                  <a v-if='isMore()'>...</a>
                  <a @click='pageClick(queryForm.pageNum + 1)'>[下一页]</a>
                  <a @click='pageClick(pages)'>[末页]</a>
                  <span>[共<span v-text='pages'></span>页]</span>
                  <span>[共<span v-text='queryForm.total || 0'></span>条]</span>
                </div>
                <!--/分页-->
              </div>
              <!--/订单列表-->
            </div>
            <!--/所有订单-->
          </div>
        </div>
      </div>
    </div>
    <ly-minifooter></ly-minifooter>
    <!-- 推流地址弹框   -->
    <div  v-if="pullStreamUrlDialog" class="url-dialog" v-cloak>
      <div class="close-dialog" @click="closeUrlDialog">x</div>
      <div class="title content">推流地址</div>
      <div class="content">{{pullStreamUrl}}</div>
    </div>
  </div>
  <script type="text/javascript" src="/common/js/libs/require.js"></script>
  <script type="text/javascript" src="/common/js/activity/list.js"></script>
</body>

</html>
